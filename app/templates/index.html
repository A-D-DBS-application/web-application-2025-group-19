{% extends 'base.html' %}
{% block title %}Dashboard — Delivery Schedule{% endblock %}

{% block content %}
<div class="page-header">
  <h1 class="page-title">Dashboard</h1>
  <p class="page-subtitle">Welkom terug, {{ username }}. Hier is je overzicht.</p>
</div>

<!-- Stats Grid -->
<div class="grid grid-cols-3 gap-4 mb-5">
  <a href="{{ url_for('main.listings') }}" class="stat-card">
    <div class="stat-card-label">Geplande Leveringen</div>
    <div class="stat-card-value">{{ deliveries_total }}</div>
    <div class="stat-card-meta">Gepland vandaag: {{ deliveries_today }}</div>
  </a>
  
  <a href="{{ url_for('main.drivers_list') }}" class="stat-card">
    <div class="stat-card-label">Beschikbare Bezorgers</div>
    <div class="stat-card-value">{{ drivers_total }}</div>
    <div class="stat-card-meta">Actief vandaag: {{ available_drivers }}</div>
  </a>
  
  <a href="{{ url_for('main.trucks_list') }}" class="stat-card">
    <div class="stat-card-label">Geregistreerde Trucks</div>
    <div class="stat-card-value">{{ available_trucks }}</div>
    <div class="stat-card-meta">In wagenpark</div>
  </a>
</div>

<div class="grid grid-cols-3 gap-4">
  <!-- Aankomende Leveringen -->
  <div class="card span-2">
    <div class="card-header flex justify-between items-center">
      <div>
        <h3 class="font-semibold">Aankomende Leveringen</h3>
        <p class="text-small text-muted mt-1">Laatste geplande leveringen</p>
      </div>
      <a href="{{ url_for('main.listings') }}" class="btn btn-ghost btn-sm">Bekijk alle →</a>
    </div>
    <div class="card-body p-0">
      {% if upcoming_deliveries %}
        <table class="table">
          <thead>
            <tr>
              <th>Adres</th>
              <th>Datum</th>
              <th>Status</th>
            </tr>
          </thead>
          <tbody>
            {% for delivery in upcoming_deliveries[:5] %}
              <tr>
                <td class="font-medium">{{ delivery.municipality or 'N/A' }}</td>
                <td>
                  {% if delivery.scheduled_date %}
                    {{ delivery.scheduled_date.strftime('%d-%m-%Y') }}
                  {% else %}
                    N/A
                  {% endif %}
                </td>
                <td>
                  <span class="badge {% if delivery.delivery_status == 'scheduled' %}badge-primary{% elif delivery.delivery_status == 'delivered' %}badge-success{% else %}badge-default{% endif %}">
                    {{ delivery.delivery_status }}
                  </span>
                </td>
              </tr>
            {% endfor %}
          </tbody>
        </table>
      {% else %}
        <div class="empty-state">
          <svg class="empty-state-icon" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1">
            <path stroke-linecap="round" stroke-linejoin="round" d="M8.25 18.75a1.5 1.5 0 01-3 0m3 0a1.5 1.5 0 00-3 0m3 0h6m-9 0H3.375a1.125 1.125 0 01-1.125-1.125V14.25m17.25 4.5a1.5 1.5 0 01-3 0m3 0a1.5 1.5 0 00-3 0m3 0h1.125c.621 0 1.129-.504 1.09-1.124a17.902 17.902 0 00-3.213-9.193 2.056 2.056 0 00-1.58-.86H14.25M16.5 18.75h-2.25m0-11.177v-.958c0-.568-.422-1.048-.987-1.106a48.554 48.554 0 00-10.026 0 1.106 1.106 0 00-.987 1.106v7.635m12-6.677v6.677m0 4.5v-4.5m0 0h-12" />
          </svg>
          <p class="empty-state-title">Geen leveringen gepland</p>
          <p class="empty-state-text">Plan je eerste levering om te beginnen.</p>
        </div>
      {% endif %}
    </div>
  </div>

  <!-- Quick Actions -->
  <div class="card">
    <div class="card-header">
      <h3 class="font-semibold">Snelle Acties</h3>
    </div>
    <div class="card-body flex flex-col gap-2">
      <a href="{{ url_for('main.add_listing') }}" class="btn btn-primary btn-block">
        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M12 5v14M5 12h14"/>
        </svg>
        Levering Plannen
      </a>
      <a href="{{ url_for('main.drivers_list') }}" class="btn btn-secondary btn-block">
        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"/>
          <circle cx="9" cy="7" r="4"/>
          <path d="M22 21v-2a4 4 0 0 0-3-3.87M16 3.13a4 4 0 0 1 0 7.75"/>
        </svg>
        Chauffeurs Beheren
      </a>
      <a href="{{ url_for('main.trucks_list') }}" class="btn btn-outline btn-block">
        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2"/>
          <path d="M15 18H9"/>
          <path d="M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14"/>
          <circle cx="17" cy="18" r="2"/>
          <circle cx="7" cy="18" r="2"/>
        </svg>
        Trucks Beheren
      </a>
    </div>
  </div>
</div>
{% endblock %}
